{% extends "base.html" %}
{% load static %}

{% block title %}Home{% endblock %}

{% block content %}
<header id="header-prin" class="py-3 text-center">
    <img src="{% static 'images/sinapsis_icono.ico' %}" class="logo" alt="Logo Sinapsis">
</header>

<nav id="ver-buttons" class="mb-4">
    <ul class="menu-header d-flex justify-content-around">
        <li>
            <a href="{% url 'ver permisos' %}"
               class="btn btn-dark {% if es_coordinador or es_BP %}disabled{% endif %}">
               Ver Permisos
            </a>
        </li>
        <li>
            <a href="{% url 'ver licencias' %}"
               class="btn btn-dark {% if es_lider %}disabled{% endif %}">
               Ver Licencias
            </a>
        </li>
    </ul>
</nav>

{% if username %}
<section id="encabezado" class="text-center mb-4">
    <h2>Página de inicio</h2>
    <i id="casita" class="bi bi-house-door"></i>
    <p>Bienvenido, <strong>{{ username }}</strong>.</p>
    <hr id="separator"/>
    <p class="lead">¿Qué desea hacer?</p>
</section>
{% endif %}

<section id="botones-crear" class="text-center mb-4">
    <button id="crear-permiso"
            class="btn btn-outline-success m-2"
            {% if es_coordinador or es_admin or es_BP %}disabled{% endif %}>
        Crear Permiso
    </button>

    <button id="crear-licencia"
            class="btn btn-outline-success m-2"
            {% if es_lider or es_admin or es_BP %}disabled{% endif %}>
        Crear Licencia
    </button>

    <a href="{% url 'resumen' %}" class="btn btn-outline-info m-2">
        Ver Resumen de Solicitudes
    </a>
</section>

<section id="boton-cerrar-sesion" class="text-center">
    <form method="POST" action="{% url 'logout' %}">
        {% csrf_token %}
        <button type="submit" class="btn btn-outline-danger">
            Cerrar Sesión
        </button>
    </form>
</section>

<!-- Modal Permisos -->
<div id="permiso-modal" class="modal">
    <div id="modal-content" class="modal-fade-per">
        <div class="container">
            <form id="form_permiso" method="post" enctype="multipart/form-data" action="{% url 'inicio' %}">
                {% csrf_token %}
                {% include 'modules/form_permisos.html' %}
                <div class="text-center mt-3">
                    <input id="btn-crear-permiso" type="submit" name="permiso" value="Enviar Permiso" class="btn btn-outline-success mx-2">
                    <button id="cerrar-modal-permisos" class="btn btn-outline-danger mx-2">Cerrar</button>
                </div>
            </form>
        </div>
    </div>
</div>

<!-- Modal Licencias -->
<div id="licencia-modal" class="modal">
    <div id="modal-content" class="modal-fade-lic">
        <div class="container">
            <form id="form_licencia" method="post" enctype="multipart/form-data" action="{% url 'inicio' %}">
                {% csrf_token %}
                {% include 'modules/form_licencias.html' %}
                <div class="text-center mt-3">
                    <input id="btn-crear-licencia" type="submit" name="licencia" value="Enviar Licencia" class="btn btn-outline-success mx-2">
                    <button id="cerrar-modal-licencias" class="btn btn-outline-danger mx-2">Cerrar</button>
                </div>
            </form>
        </div>
    </div>
</div>

<!-- Mensajes del sistema -->
{% if messages %}
    <div class="container mt-3">
        <ul class="alert alert-info list-unstyled">
            {% for message in messages %}
                <li{% if message.tags %} class="{{ message.tags }}"{% endif %}>{{ message|safe }}</li>
            {% endfor %}
        </ul>
    </div>
{% endif %}

<script src="{% static 'js/javascript.js' %}"></script>
{% endblock %}
